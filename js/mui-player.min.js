"use strict";function _createForOfIteratorHelper(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayer=t()}(window,function(){function e(e){var l=this,r="",n="",i=null,a=null,y=e||{},s=y.plugins||[];this._event_={};var p,c,u,d,g,m,f,v,h,b="string"==typeof y.container?document.querySelector(y.container):y.container;b&&(p={unitLengthReg:/^\d\d?\d?\%?(px)?(cm)?(mm)?(em)?(rem)?(vw)?(vh)?(auto)?(inherit)?(initial)?$/},c={themeColor:"#1e98d4"},u={video:'\x3c!-- HTML5 Video --\x3e<div class="video-wrapper"><video width="100%" height="100%"></video></div>',mplayerPoster:'<div class="mplayer-poster" id="mplayer-poster"></div>',mplayerCover:'\x3c!-- 媒体播放遮罩层 --\x3e<div class="mplayer-cover" id="mplayer-cover"></div>',mplayerLoading:'\x3c!-- Mplayer加载Loading --\x3e<div class="mplayer-loading"id="mplayer-loading"control><svg viewBox="25 25 50 50"class="mplayer-loading__circular"><circle cx="50"cy="50"r="20"fill="none"></circle></svg></div>',mplayerError:'\x3c!-- 视频加载错误显示 --\x3e<div class="mplayer-error"id="mplayer-error"control><div class="errop-tip">播放加载失败，请稍后重试</div><svg t="1575125481608"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="5893"width="28"height="28"><path d="M513.34 831.74C337.03 831.74 193.6 688.31 193.6 512c0-71.09 23.31-138.85 65.53-194.03v51.61c0 17.67 14.33 32 32 32s32-14.33 32-32V239.45c0-5.87-1.59-11.36-4.34-16.09-0.06-0.1-0.11-0.2-0.17-0.3-0.16-0.28-0.34-0.55-0.51-0.82-0.13-0.2-0.26-0.41-0.39-0.61-0.08-0.13-0.17-0.25-0.26-0.37a35.5 35.5 0 0 0-1.58-2.13c-6.81-8.35-16.96-12.35-26.95-11.69h-130c-17.67 0-32 14.33-32 32s14.33 32 32 32h55.35C159.8 339 129.6 423.35 129.6 512c0 51.79 10.15 102.05 30.17 149.38 19.33 45.7 46.99 86.74 82.23 121.97 35.23 35.23 76.27 62.9 121.97 82.23 47.33 20.02 97.59 30.17 149.38 30.17 17.67 0 32-14.33 32-32s-14.34-32.01-32.01-32.01zM855.38 762.3h-51.23c19.81-23 36.93-48.3 50.75-75.22 27.6-53.74 42.18-114.28 42.18-175.08 0-51.79-10.15-102.05-30.17-149.38-19.33-45.7-46.99-86.73-82.23-121.97-35.23-35.23-76.27-62.9-121.97-82.23-47.33-20.02-97.59-30.17-149.38-30.17-17.67 0-32 14.33-32 32s14.33 32 32 32c176.31 0 319.74 143.44 319.74 319.74 0 78.31-27.68 151.61-77.6 209.05l0.24-56.04c0.08-17.67-14.19-32.06-31.86-32.14h-0.14c-17.61 0-31.92 14.24-32 31.86l-0.55 129.43a31.988 31.988 0 0 0 9.32 22.71 31.68 31.68 0 0 0 5.33 4.3c0.02 0.01 0.04 0.02 0.06 0.04 0.48 0.31 0.97 0.61 1.47 0.89l0.15 0.09c0.5 0.28 1 0.54 1.51 0.8 0.03 0.01 0.05 0.03 0.08 0.04 1.64 0.8 3.34 1.46 5.1 1.98 0.01 0 0.02 0.01 0.03 0.01 0.55 0.16 1.1 0.3 1.66 0.43 0.07 0.02 0.15 0.03 0.22 0.05 0.5 0.11 1 0.21 1.5 0.3 0.1 0.02 0.2 0.04 0.3 0.05 0.48 0.08 0.96 0.15 1.44 0.21 0.11 0.01 0.23 0.03 0.34 0.04 0.48 0.05 0.95 0.09 1.43 0.12l0.34 0.03c0.53 0.03 1.07 0.04 1.61 0.05h132.31c17.67 0 32-14.33 32-32s-14.31-31.99-31.98-31.99z"p-id="5894"fill="#ffffff"></path></svg></div>',mplayerHeader:'\x3c!-- Mplayer 顶部导航 --\x3e<div class="mplayer-header"id="mplayer-header"><div class="title-groupt"id="title-groupt"><button class="player-btn header-control back-button keyboard-input"id="back-button"control><svg id="back-icon-svg"t="1573891955387"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="4550"width="18"height="18"><path d="M305.519192 557.640404c-11.636364 0-23.40202-4.39596-32.323232-13.317172-17.842424-17.842424-17.842424-46.674747 0-64.517171L683.830303 69.30101c17.842424-17.842424 46.674747-17.842424 64.517172 0 17.842424 17.842424 17.842424 46.674747 0 64.517172L337.713131 544.323232c-8.921212 8.921212-20.557576 13.317172-32.193939 13.317172z m0 0"fill="#ffffff"p-id="4551"></path><path d="M715.894949 968.145455c-11.636364 0-23.40202-4.39596-32.323232-13.317172L273.19596 544.323232c-17.842424-17.842424-17.842424-46.674747 0-64.517171 17.842424-17.842424 46.674747-17.842424 64.517171 0l410.505051 410.50505c17.842424 17.842424 17.842424 46.674747 0 64.517172-8.921212 8.921212-20.557576 13.317172-32.323233 13.317172z m0 0"fill="#ffffff"p-id="4552"></path></svg><div class="title-name"id="title-name"></div></button></div><div class="buttom-group"id="buttom-group"></div></div>',mplayerFooter:'\x3c!-- Mplayer 底部操作控件 --\x3e<div class="mplayer-footer"id="mplayer-footer"><div class="progress"id="progress"><div class="left-part"id="left-part"><button class="player-btn keyboard-input play-switch footer-control"id="play-switch"control>\x3c!--play button--\x3e<div class="_play"><svg t="1574051894346"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1212"><path d="M324.085 95.787l500.422 300.664c82.373 50.453 79.284 136.946-1.030 186.37v0l-506.6 304.784c-41.187 23.683-87.522 37.068-131.798 9.267-36.037-22.653-46.335-58.691-46.335-97.819v-616.774c0-39.127 13.386-75.166 48.395-97.819 45.305-27.801 94.731-14.416 136.946 11.327v0z"p-id="1213"fill="#ffffff"></path></svg></div>\x3c!--pause button--\x3e<div class="_pause"style="display: none;"><svg t="1574051952939"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="1434"><path d="M248.26311111 515.072c0-110.592-0.22755555-221.184 0.11377778-331.776 0.11377778-35.84 18.20444445-60.87111111 49.26577778-70.99733333 27.53422222-8.87466667 56.88888889 0.34133333 75.32088888 23.77955555 10.58133333 13.42577778 15.13244445 28.89955555 15.01866667 45.96622223-0.11377778 223.11822222 0.11377778 446.23644445-0.22755555 669.35466666-0.11377778 42.55288889-31.06133333 73.27288889-70.54222222 72.81777778-39.25333333-0.45511111-68.72177778-31.51644445-68.94933334-74.52444444-0.34133333-111.50222222 0-223.11822222 0-334.62044445zM638.52088889 516.66488889V193.64977778c0-52.45155555 27.42044445-85.21955555 70.54222222-84.65066667 42.43911111 0.56888889 69.17688889 32.42666667 69.17688889 83.05777778 0.11377778 218.22577778 0.11377778 436.56533333 0 654.79111111 0 38.34311111-17.29422222 63.60177778-49.152 73.95555555-27.648 8.98844445-56.54755555 0-75.43466667-23.552-12.17422222-15.13244445-15.36-32.768-15.24622222-51.76888888 0.22755555-109.568 0.11377778-219.136 0.11377778-328.81777778z"p-id="1435"fill="#ffffff"></path></svg></div></button>\x3c!--直播模式--\x3e<button class="player-btn live-mode footer-control"id="live-mode"control><div class="spot"></div><div class="mode-text">直播</div></button></div>\x3c!--底部进度容器--\x3e<div class="progress-container"id="progress-container">\x3c!--安全进度时长--\x3e<div class="progress-begin"id="progress-begin">开始</div>\x3c!--拖动有效的作用域--\x3e<div class="touch-effective"id="touch-effective">\x3c!--加载进度条总长--\x3e<div class="progress-total"id="progress-total"></div>\x3c!--资源缓存进度--\x3e<div class="progress-buffered"id="progress-buffered"></div>\x3c!--播放进度--\x3e<div class="progress-play"id="progress-play"></div>\x3c!--拖动进度球--\x3e<div class="ball-container"><div class="progress-drag"id="progress-ball"><div class="progress-ball"></div></div></div></div>\x3c!--总时长--\x3e<div class="progress-long"id="progress-long">结束</div></div><div class="right-part"id="right-part">\x3c!--全屏开关--\x3e<button class="player-btn keyboard-input full-switch footer-control"id="full-switch"tooltip="全屏"control><div class="_full"><svg t="1607611836872"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2384"><path d="M842 797.08l-226.07999999-226.08a30 30 0 0 0-42.42000001 42.42000001L799.58 839.5 692 839.5a30 30 0 0 0 0 60L872 899.5a29.91 29.91 0 0 0 30-29.99999999l0-180a30 30 0 0 0-60 0l0 107.57999999zM130.79 128.29A29.91 29.91 0 0 1 152 119.5l180 0a30 30 0 0 1 0 60l-107.58 0 226.08 226.08a30 30 0 0 1-42.42000001 42.42L182 221.92 182 329.50000001a30 30 0 0 1-60 0L122 149.50000001a29.91 29.91 0 0 1 8.79-21.21000001z"fill="#ffffff"p-id="2385"></path></svg></div><div class="_unfull"style="display: none;"><svg t="1607611848290"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2546"><path d="M416.00000001 370.752L174.848 129.59999999a32 32 0 0 0-45.24800001 45.24800001L370.752 416.00000001 256 416a32 32 0 0 0 0 64l192 0a31.904 31.904 0 0 0 32-32L480 256a32 32 0 0 0-64 0l1e-8 114.752z m137.37599999 182.624A31.904 31.904 0 0 1 576 544L768 544a32 32 0 0 1 0 64l-114.752-1e-8 241.15200001 241.15200001a32 32 0 1 1-45.24800001 45.24800001L607.99999999 653.248 608 768a32 32 0 0 1-64 0l0-192a31.904 31.904 0 0 1 9.376-22.624z"fill="#ffffff"p-id="2547"></path></svg></div></button></div></div></div>',miniProgress:'\x3c!-- Mplayer 底部播放迷你进度条 --\x3e<div class="mini-progress"id="mini-progress">\x3c!--加载进度条总长--\x3e<div class="mini-total"id="mini-total"></div>\x3c!--资源缓存进度--\x3e<div class="mini-buffered"id="mini-buffered"></div>\x3c!--播放进度--\x3e<div class="mini-play"id="mini-play"></div></div>'},d=function(){return{first_authplay:!1,isReady:!1,webpagePlugin:{},mobilePlugin:{},cssAutoprefixer:["webkit","ms","moz","o"]}},m=new(g=function(){return{mPlayer:b,videoObject:b.querySelector("video"),mplayerCover:b.querySelector("#mplayer-cover"),mplayerPoster:b.querySelector("#mplayer-poster"),mplayerHeader:b.querySelector("#mplayer-header"),headerMenu:b.querySelector("#buttom-group"),backButton:b.querySelector("#back-button"),mplayerFooter:b.querySelector("#mplayer-footer"),progressContainer:b.querySelector("#progress-container"),playSwitch:b.querySelector("#play-switch"),fullSwitch:b.querySelector("#full-switch"),progressBall:b.querySelector("#progress-ball"),progressBegin:b.querySelector("#progress-begin"),progressLong:b.querySelector("#progress-long"),touchEffective:b.querySelector("#touch-effective"),progressBuffered:b.querySelector("#progress-buffered"),progressPlay:b.querySelector("#progress-play"),miniProgress:b.querySelector("#mini-progress"),miniBuffered:b.querySelector("#mini-buffered"),miniPlay:b.querySelector("#mini-play"),mplayerLoading:b.querySelector("#mplayer-loading"),mplayerError:b.querySelector("#mplayer-error")}}),v=new(f=function(){return{mediaPlayDirectives:0,isFullScreen:!1,showScreenControls:!1,ball_move_status:!1,isPlay:!1,mediaStatus:!1,duration:0,percentage:0,currentTime:0,playError:0,isDestory:!1,startX:null,startY:null,moveX:null,moveY:null,_defaultPlayProgressPro:null,isTouchMove:!1}}),h={getLanguageText:function(){return{"zh-cn":{settings:"设置",coveredPlay:"铺满播放",loopPlay:"循环播放",playbackSpeed:"播放速度",share:"分享",pictureInPicture:"画中画",exitPictureInPicture:"退出画中画",pageScreen:"网页全屏",exitPageScreen:"退出网页全屏",fullScreen:"全屏",exitFullScreen:"退出全屏",normal:"正常",open:"打开",subtitles:"字幕",selectLangage:"选择语言"},en:{settings:"Settings",coveredPlay:"Covered play",loopPlay:"Loop play",playbackSpeed:"Playback speed",share:"Share",pictureInPicture:"Picture in picture",exitPictureInPicture:"Exit picture in picture",pageScreen:"Page screen",exitPageScreen:"Exit page screen",fullScreen:"Full screen",exitFullScreen:"Exit full screen",normal:"Normal",open:"Open",subtitles:"Subtitles",selectLangage:"Select langage"},"zh-tw":{settings:"設置",coveredPlay:"鋪滿播放",loopPlay:"循環播放",playbackSpeed:"播放速度",share:"分享",pictureInPicture:"畫中畫",exitPictureInPicture:"退出畫中畫",pageScreen:"網頁全屏",exitPageScreen:"退出網頁全屏",fullScreen:"全屏",exitFullScreen:"退出全屏",normal:"正常",open:"打開",subtitles:"字幕",selectLangage:"選擇語言"}}},getLangObject:function(){var e=y.lang||navigator.language||navigator.browserLanguage||"zh-cn";return-1!=["zh-cn","en","zh-tw"].indexOf(e.toLowerCase())?h.getLanguageText()[e.toLowerCase()]:h.getLanguageText()["zh-cn"]},initCreateMplayer:function(e){for(var t=u.video+u.mplayerPoster+u.mplayerCover+u.mplayerLoading+u.mplayerError+u.mplayerHeader+u.mplayerFooter+u.miniProgress,t=u.logWrite?t+u.logWrite:t,o=0;o<s.length;o++)"androd"!=h.returnSys()&&"ios"!=h.returnSys()||s[o]instanceof Object&&"MuiPlayerMobilePlugin"==s[o].name&&(n=s[o]),"window"==h.returnSys()&&s[o]instanceof Object&&"MuiPlayerDesktopPlugin"==s[o].name&&(r=s[o]);t=t.toString().replace(/<!--.*?-->/g,"");t=h.createRangeIsDocFragment(t),t=h.initConifgAttribute(t,e);t=h.initConfigControl(t),t=h.initConfigCustom(t),t=h.initConfigTheme(t);e={option:y,_this:l,$el:g,$data:v,$method:h,$habit:c,$CONSTANT:p};n&&(t=n.appendTemplate(t,e)),r&&(t=r.appendTemplate(t,e));e=b.querySelector("#mplayer-media-wrapper");e&&h.removeNode(b,"#mplayer-media-wrapper"),(e=document.createElement("div")).setAttribute("id","mplayer-media-wrapper"),e.setAttribute("class","player-wrapper"),e.appendChild(t),m.mPlayer.appendChild(e),y.src?(h.playerReady(),setTimeout(function(){l._global_.isReady=!0,l.emit("ready"),setTimeout(function(){h.onScreenResize({type:"showControls"})},10)},100)):h.showToast("视频地址为空")},onAction:function(){},playerReady:function(){h.resetVariable(),!0===y.autoplay&&(v.mediaPlayDirectives=1,h.onPlay()),h.toggleEventListenerGlobal("add","playerReady"),h.toggleEventListenerCustom("add")},overloadingEl:function(){m=new g;for(var e=0,t=Object.keys(m);e<t.length;e++){var o=t[e];"mPlayer"!=o&&(m[o]||(m[o]={style:{},classList:{add:function(){},contains:function(){},remove:function(){}},addEventListener:function(){},removeEventListener:function(){}}),m[o].querySelector=function(e){e=this.querySelectorAll?this.querySelectorAll(e):[];return e[0]||{exist:!1,style:{},height:"",width:""}})}},resetVariable:function(){for(var e=new f,t=0;t<Object.keys(e).length;t++){var o=Object.keys(e)[t];v[o]=e[o]}h.overloadingEl(),l._global_=new d},plusRuntimeHandle:function(e){"resume"==(e=e||{}).type&&(l._global_._beferPlayState&&m.videoObject.play(),v.isFullScreen&&plus.navigator.hideSystemNavigation()),"pause"==e.type&&(l._global_._beferPlayState=v.isPlay,m.videoObject.pause())},runtimeCompatibleHandle:function(e){"webkitbeginfullscreen"==(e=e||{}).type&&h.createTimerCloseControl({type:"cancel"}),"webkitendfullscreen"==e.type&&h.createTimerCloseControl()},assginConfig:function(){y.themeColor&&(c.themeColor=y.themeColor)},parseCamel:function(e){return e.replace(/\B([A-Z])/g,"-$1").toLowerCase()},createRangeIsDocFragment:function(e){var t=document.createRange();return t.selectNode(m.mPlayer),t.createContextualFragment(e)},consoleLog:function(e,t){"development"==process.env.NODE_ENV&&console[t||"log"](e)},removeNode:function(e,t){e instanceof Element||e instanceof DocumentFragment?(e=e.querySelector(t))instanceof Element&&e.parentNode.removeChild(e):(t=document.querySelector(t))&&t.parentNode.removeChild(t)},getKeyCode:function(e){return e.keyCode||e.which||""},focusToggle:function(e){m.mPlayer.classList["ON"==e?"add":"remove"]("mp-keyboard-focus")},setElementStyle:function(e,t){var o=Object.keys(t);if(0<o.length){var r=_createForOfIteratorHelper(o);try{for(r.s();!(n=r.n()).done;){var n=n.value;e.style[h.parseCamel(n)]=t[n]}}catch(e){r.e(e)}finally{r.f()}e.setAttribute("stylesheet",JSON.stringify(t))}},initConfigTheme:function(e){return h.assginConfig(),e.querySelector("#progress-play")&&(e.querySelector("#progress-play").style.background=c.themeColor),e.querySelector("#mplayer-loading")&&(e.querySelector("#mplayer-loading").style.color=c.themeColor),e.querySelector("#mini-play")&&(e.querySelector("#mini-play").style.background=c.themeColor),e.querySelector("#live-mode")&&(e.querySelector("#live-mode .spot").style.background=c.themeColor),e},initConfigCustom:function(e){for(var t=y.custom||{},o=t.headControls||[],r=0;r<o.length&&!(5<=r);r++)o[r]instanceof Object&&o[r].slot&&(i=o[r].slot,(l=m.mPlayer.querySelector("[slot="+i+"]"))&&(a="TEMPLATE"==l.tagName?l.content.cloneNode(!0):h.createRangeIsDocFragment(l.innerHTML),(s=document.createElement("button")).setAttribute("class","player-btn header-control"),s.setAttribute("slot",i),s.setAttribute("control",""),o[r].click instanceof Function&&s.classList.add("keyboard-input"),o[r].style&&o[r].style instanceof Object&&h.setElementStyle(s,o[r].style),s.appendChild(a),e.querySelector("#buttom-group").insertBefore(s,e.querySelector("#buttom-group .header-control")),l.style.display="none"));for(var n=t.footerControls||[],r=0;r<n.length&&!(5<=r);r++)n[r]instanceof Object&&n[r].slot&&(i=n[r].slot,(l=m.mPlayer.querySelector("[slot="+i+"]"))&&(a="TEMPLATE"==l.tagName?l.content.cloneNode(!0):h.createRangeIsDocFragment(l.innerHTML),(s=document.createElement("button")).setAttribute("class","player-btn footer-control"),s.setAttribute("slot",i),s.setAttribute("control",""),n[r].tooltip&&s.setAttribute("tooltip",n[r].tooltip),n[r].click instanceof Function&&s.classList.add("keyboard-input"),n[r].style&&n[r].style instanceof Object&&h.setElementStyle(s,n[r].style),s.appendChild(a),"left"==n[r].position?e.querySelector("#mplayer-footer #left-part").appendChild(s):e.querySelector("#mplayer-footer #right-part").insertBefore(s,e.querySelector("#mplayer-footer #right-part").childNodes[0]),l.style.display="none"));for(var i,l,a,s,c,u=t.rightSidebar||[],r=0;r<u.length&&!(5<=r);r++)u[r]instanceof Object&&u[r].slot&&(i=u[r].slot,(l=m.mPlayer.querySelector("[slot="+i+"]"))&&(a="TEMPLATE"==l.tagName?l.content.cloneNode(!0):h.createRangeIsDocFragment(l.innerHTML),(s=document.createElement("div")).appendChild(a),s.setAttribute("slot",i),s.setAttribute("class","mplayer-sidebar"),c=u[r].width||"",p.unitLengthReg.test(c)&&(s.style.width=isNaN(Number(c))?c:c+"px"),e.appendChild(s),l.style.display="none"));return e},initConfigControl:function(e){!1!==y.showMiniProgress&&!0!==y.live||h.removeNode(e,"#mini-progress"),!0===y.live?h.removeNode(e,"#progress-container"):h.removeNode(e,"#live-mode"),!1===y.pageHead&&(e.querySelector("#mplayer-header").style.opacity=0);var t=y.subtitle||{},o=t.tracks,r=t.styles;if("[object Array]"===Object.prototype.toString.call(o)&&0<o.length){for(var n=document.createDocumentFragment(),i=0;i<o.length;i++){var l,a=o[i];"object"==_typeof(a)&&/.\.vtt$/.test(a.src)&&((l=document.createElement("track")).setAttribute("src",a.src),l.setAttribute("kind",a.kind||"subtitles"),l.setAttribute("label",a.label||"字幕"+(i+1)),a.srclang&&l.setAttribute("srclang",a.srclang),!0===a.default&&l.setAttribute("default",!0),n.appendChild(l))}e.querySelector("video").appendChild(n)}if("[object Object]"==Object.prototype.toString.call(r)&&0<Object.keys(r).length){var s=document.createElement("style");s.setAttribute("id","pseudo-classes-cue"),s.setAttribute("type","text/css");for(var c="",u=0,p=Object.keys(r);u<p.length;u++){var d=p[u];c+=h.parseCamel(d)+":"+r[d]+"!important;"}t=document.createTextNode(".m-player video::cue {"+c+"}");s.appendChild(t),document.getElementsByTagName("head").item(0).appendChild(s)}return e},initConifgAttribute:function(a,e){var t=m.mPlayer.getBoundingClientRect(),o=t.width,r=t.height;m.mPlayer.setAttribute("class","m-player"),m.mPlayer.setAttribute("tabindex","0"),!p.unitLengthReg.test(y.width)&&!0!==e||v.isFullScreen||(t=isNaN(Number(y.width))?y.width:y.width+"px",m.mPlayer.style.width=!0===e?o+"px":t),!p.unitLengthReg.test(y.height)&&!0!==e||v.isFullScreen||(i=isNaN(Number(y.height))?y.height:y.height+"px",m.mPlayer.style.height=!0===e?r+"px":i),0<=y.volume&&y.volume<=1&&(a.querySelector("video").volume=y.volume);function n(e,t){var o=a.querySelector("video");if("src"==e){var r=y.parse||{},n=r.type,i=r.loader,l=r.config||{};if(r.customKernel&&r.customKernel instanceof Function)return console.info("custom kernel..."),r.customKernel(o,t),0;if(o.setAttribute(e,t),"hls"==n){if("function"!=typeof i)return;1==i.isSupported()?h.hlsDecodeAction(o,t,{loader:i,config:l}):console.error("browser does not support hls js. to check whether your browser is supporting MediaSource Extensions.")}"flv"==n&&"object"==_typeof(i)&&(1==i.isSupported()?h.flvDecodeAction(o,t,{loader:i,config:l}):console.error("browser does not support flv js. to check whether your browser is supporting MediaSource Extensions."))}else o.setAttribute(e,t)}y.src&&n("src",y.src),!0===y.autoplay&&n("autoplay","autoplay"),1==y.autoplay||y.preload&&n("preload",y.preload),y.loop&&n("loop","loop");var i,l=y.videoAttribute||[];if(0<l.length)for(var s=0;s<l.length;s++)n(l[s].attrKey,l[s].attrValue);return y.poster?((i=document.createElement("img")).setAttribute("src",y.poster),i.setAttribute("style","width: 100%;height: 100%;object-fit: cover;"),a.querySelector("#mplayer-poster").appendChild(i)):h.removeNode(a,"#mplayer-poster"),y.title&&(a.querySelector("#title-name").innerHTML=y.title),!0===y.initFullFixed&&m.mPlayer.classList.add("page-fullscreen"),"square"==y.dragSpotShape&&(a.querySelector("#progress-ball .progress-ball").style.borderRadius="3px",a.querySelector("#progress-ball .progress-ball").style.width="9px",a.querySelector("#progress-ball .progress-ball").style.height="14px"),"cover"==y.objectFit&&a.querySelector("video").classList.add("covered"),a.querySelector("#mplayer-footer #full-switch").setAttribute("tooltip",h.getLangObject().fullScreen),a},hlsDecodeAction:function(e,t,o){console.info("hls create...");var r=Object.assign({autoStartLoad:!0===y.autoplay||"none"!=y.preload},o.config);(i=new o.loader(r)).attachMedia(e),i.on(o.loader.Events.MEDIA_ATTACHED,function(){i.loadSource(t)}),i.on(o.loader.Events.ERROR,h.onError)},flvDecodeAction:function(e,t,o){console.info("flv create...");t=Object.assign({type:"flv",url:t},o.config);(a=o.loader.createPlayer(t)).attachMediaElement(e),!0!==y.autoplay&&"none"==y.preload||a.load(),a.on(o.loader.Events.ERROR,h.onError)},hasNotchInScreen:function(){return!!window.plus&&plus.navigator.hasNotchInScreen()},applicationFullHandle:function(){window.plus&&(this._landscape_lock=function(){plus.navigator.setFullscreen(!0),plus.screen.lockOrientation("landscape"),setTimeout(function(){plus.navigator.hideSystemNavigation()},200),setTimeout(function(){var e=plus.navigator.getStatusbarHeight(),e=h.hasNotchInScreen()?e+10:10;m.mplayerHeader.style.paddingLeft=e+"px",m.mplayerHeader.style.paddingRight=e+"px",m.mplayerFooter.style.paddingLeft=e+"px",m.mplayerFooter.style.paddingRight=e+"px",m.progressContainer.style.left=e+"px",m.progressContainer.style.right=e+"px"},100)},this._portrait_lock=function(){plus.navigator.setFullscreen(!1),plus.screen.lockOrientation("portrait"),setTimeout(function(){m.mplayerHeader.style.paddingLeft="10px",m.mplayerHeader.style.paddingRight="10px",m.mplayerFooter.style.paddingLeft="10px",m.mplayerFooter.style.paddingRight="10px"},100)})},setTooltipText:function(e,t){e.setAttribute&&e.setAttribute("tooltip",t),m.mplayerFooter.querySelector(".mp-tooltip").innerText=t},fullToggle:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();l._global_.generate_fullscreen_listener||(l._global_.generate_fullscreen_listener=!0,m.mPlayer.requestFullscreen?document.addEventListener("fullscreenchange",function(){document.fullscreenElement?h.fullScreenChangeAction("Y"):h.fullScreenChangeAction("N")}):m.mPlayer.webkitRequestFullscreen?document.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement?h.fullScreenChangeAction("Y"):h.fullScreenChangeAction("N")}):m.mPlayer.mozRequestFullScreen?document.addEventListener("mozfullscreenchange",function(){document.mozFullScreenElement?h.fullScreenChangeAction("Y"):h.fullScreenChangeAction("N")}):m.mPlayer.msRequestFullscreen&&document.addEventListener("msfullscreenchange",function(){document.msFullscreenElement?h.fullScreenChangeAction("Y"):h.fullScreenChangeAction("N")})),v.isFullScreen?h.closeFullScreen():h.openFullScreen()},fullScreenChangeAction:function(e){"Y"==e?(v.isFullScreen=!0,m.fullSwitch.querySelector("._full").style.display="none",m.fullSwitch.querySelector("._unfull").style.display="block",h.setTooltipText(m.fullSwitch,h.getLangObject().exitFullScreen)):"N"==e&&(v.isFullScreen=!1,m.fullSwitch.querySelector("._full").style.display="block",m.fullSwitch.querySelector("._unfull").style.display="none",h.setTooltipText(m.fullSwitch,h.getLangObject().fullScreen),m.mPlayer.classList.contains("browser-fullscreen")&&h.closeFullScreen("completed")),window.plus&&(v.isPlay?plus.device.setWakelock(!0):plus.device.setWakelock(!1))},closeFullScreen:function(e){function t(){v.isFullScreen=!1,h.createTimerCloseControl(),m.mPlayer.classList.remove("browser-fullscreen"),"completed"!=e&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())}0!=y.autoOrientaion&&window.plus&&"ios"!=h.returnSys()?((new h.applicationFullHandle)._portrait_lock(),setTimeout(function(){t(),!1===y.pageHead&&(m.mplayerHeader.style.opacity=0)},100)):(t(),!1===y.pageHead&&(m.mplayerHeader.style.opacity=0))},openFullScreen:function(){var e;"ios"!=h.returnSys()?(e=function(){m.mPlayer.requestFullscreen?m.mPlayer.requestFullscreen():m.mPlayer.webkitRequestFullscreen?m.mPlayer.webkitRequestFullscreen():m.mPlayer.mozRequestFullScreen?m.mPlayer.mozRequestFullScreen():m.mPlayer.msRequestFullscreen&&m.mPlayer.msRequestFullscreen(),v.isFullScreen=!0,h.createTimerCloseControl(),m.mPlayer.classList.add("browser-fullscreen")},0!=y.autoOrientaion&&window.plus?((new h.applicationFullHandle)._landscape_lock(),setTimeout(function(){e(),!1===y.pageHead&&(m.mplayerHeader.style.opacity=1)},100)):(e(),!1===y.pageHead&&(m.mplayerHeader.style.opacity=1))):m.videoObject.webkitEnterFullscreen()},onPlayTap:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();var t=m.playSwitch.querySelector("._play").style.display;m.playSwitch.querySelector("._pause").style.display;if(v.isPlay||"none"==t)m.videoObject.pause();else if(!v.isPlay){if(!y.src)return void h.showToast("视频地址为空");!i&&!a||v.mediaStatus?(v.mediaPlayDirectives=0,m.videoObject.play()):(v.mediaPlayDirectives=1,i&&i.startLoad(),a&&a.load()),l._global_.mp_timeout_4||(l._global_.mp_timeout_4=setTimeout(function(){l._global_.mp_timeout_4=null,v.isPlay||h.showLoading()},500))}h.createTimerCloseControl(e)},onContrainerTap:function(e){var t;(e=e||{}).stopPropagation&&e.stopPropagation(),v.isTouchMove||(t=function(){l._global_.triggerDblclickEvent||(n?new n.interface(e)._onAgentMpTap("dbclick"):r?new r.interface(e)._onAgentMpTap("dbclick"):h.onPlayTap({type:"dblscreen"}),l._global_.triggerDblclickEvent=!0,setTimeout(function(){l._global_.triggerDblclickEvent=!1},310))},l._global_.clickCount=l._global_.clickCount||0,l._global_.clickCount++,2==l._global_.clickCount?(t(),l._global_.clickCount=0):(l._global_.mp_timeout_2&&clearTimeout(l._global_.mp_timeout_2),l._global_.mp_timeout_2=setTimeout(function(){1==l._global_.clickCount&&(l._global_.triggerDblclickEvent||(n?new n.interface(e)._onAgentMpTap("click"):r?new r.interface(e)._onAgentMpTap("click"):h.toggleControlsDisplay(e))),l._global_.clickCount=0},300)),"dblclick"==e.type&&(t(),l._global_.clickCount=0))},onPause:function(){v.isPlay=!1,setTimeout(function(){h.hideLoading()},500),m.playSwitch.querySelector("._play").style.display="block",m.playSwitch.querySelector("._pause").style.display="none",window.plus&&plus.device.setWakelock(!1)},onPlay:function(){setTimeout(function(){h.computeLoadingStatus(function(e){e||v.playError||h.showLoading()})},500)},onPlaying:function(){h.computeLoadingStatus(function(e){e&&(h.hideLoading(),h.hideCover(),y.live||h.onTimeupdate())}),window.plus&&plus.device.setWakelock(!0),v.isPlay=!0,1<v.duration&&1!=m.videoObject.style.opacity&&setTimeout(function(){m.videoObject.style.opacity=1},500),m.playSwitch.querySelector("._play").style.display="none",m.playSwitch.querySelector("._pause").style.display="block","none"!=m.mplayerError.style.display&&(m.mplayerError.style.display="none"),y.poster&&"none"!=m.mplayerPoster.style.display&&(m.mplayerPoster.style.display="none"),0!=y.autoFit&&1<v.duration&&"auto"!=m.mPlayer.style.height&&!v.isFullScreen&&(m.mPlayer.style.height="auto")},computeLoadingStatus:function(r){var n=0;(function e(){var t=m.videoObject.duration||0,o=m.videoObject.currentTime||0;1<t||0<o?r(!0):1e3<=n?r(!1):setTimeout(function(){n+=200,e()},200)})()},onBack:function(e){e.stopPropagation(),v.isFullScreen?h.fullToggle():l.emit("back"),h.createTimerCloseControl()},onCanplaythrough:function(){h.hideCover(),h.hideLoading()},onDurationChange:function(){m.videoObject.duration;var e;1<(e=m.videoObject.duration)&&(v.mediaStatus=!0,v.duration=e,l.emit("duration-change",{duration:e}),1!=v.mediaPlayDirectives||l._global_.first_authplay||(l._global_.first_authplay=!0,m.videoObject.play(),h.hideLoading()),e!=1/0&&(e=h.formatCurrentTime(v.duration),m.progressLong.innerHTML=e,m.progressBegin.innerHTML="00:00"),1!=m.videoObject.style.opacity&&setTimeout(function(){m.videoObject.style.opacity=1},500),0!=y.autoFit&&"auto"!=m.mPlayer.style.height&&(m.mPlayer.style.height="auto"))},formatCurrentTime:function(e){var t=0<(t=parseInt(e/3600))?t+":":"",o=parseInt(e%3600/60);o=0==(o=0<o&&1==o.toString().length?"0"+o+":":o+":")?"00:":o;e=parseInt(e%60);return e=0==(e=0<e&&1==e.toString().length?"0"+e:e)?"00":e,t.toString()+o.toString()+e.toString()},updateProgressBar:function(e){v.percentage=e,m.progressBall.style.left=v.percentage+"%",m.progressPlay.style.width=v.percentage+"%",h.computePlayTime(v.percentage,v.duration,function(e){m.progressBegin.innerHTML=e}),l.emit("seek-progress",{percentage:e})},progressControlHandle:function(e,t,o,r){h.computeProgress(e,t,function(e){e=Number.parseFloat(v._defaultPlayProgressPro||0)+e*(o||1);100<=e?e=100:e<=0&&(e=0),h.updateProgressBar(e),r&&r()})},computeProgress:function(e,t,o){o(e/t.getBoundingClientRect().width*100)},computePlayTime:function(e,t,o){100<=e?e=100:e<=0&&(e=0),v.currentTime=e/100*t,o(h.formatCurrentTime(v.currentTime))},onTimeupdate:function(e){var t,o;v.duration<=1||v.duration==1/0||(t=m.videoObject.currentTime||0)<.1||(100<=(o=t/v.duration*100)&&(o=100),m.miniPlay.style.width=o+"%",v.ball_move_status||function(){m.progressBall.style.left=o+"%",m.progressPlay.style.width=o+"%";var e=h.formatCurrentTime(t);m.progressBegin.innerHTML!=e&&(m.progressBegin.innerHTML=e)}(),y.live||(l._global_.playingState=!1,l._global_.mp_timeout_5&&clearTimeout(l._global_.mp_timeout_5),l._global_.mp_timeout_5=setTimeout(function(){!l._global_.playingState&&v.isPlay&&h.showLoading()},700),v.isPlay&&(l._global_.beginTimeDot?(l._global_.endTimeDot=new Date,l._global_.endTimeDot.getTime()-l._global_.beginTimeDot.getTime()<=700&&(l._global_.playingState=!0,h.hideLoading(),clearTimeout(l._global_.mp_timeout_5)),l._global_.nextTimeUpdateState=!1,l._global_.mp_timeout_6&&clearTimeout(l._global_.mp_timeout_6),l._global_.mp_timeout_6=setTimeout(function(){!l._global_.nextTimeUpdateState&&v.isPlay&&h.showLoading()},700),l._global_.beginTimeDot=null):(l._global_.beginTimeDot=new Date,l._global_.nextTimeUpdateState=!0))),v.mediaStatus||h.onDurationChange(e))},progressBarSeeking:function(t){if((t=t||{}).stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),v.mediaStatus&&v.duration!=1/0&&"NaN"!=v.duration){var e=function(){v.ball_move_status=!0,h.createTimerCloseControl({type:"cancel"}),v.startX=("touchstart"==t.type?t.touches[0]:t).clientX,v._defaultPlayProgressPro=0;var e=m.touchEffective.getClientRects()[0],e=v.startX-e.left;h.progressControlHandle(e,m.touchEffective),v._defaultPlayProgressPro=m.progressPlay.style.width.substr(0,m.progressPlay.style.width.length-1)||0,"touchstart"==t.type?(m.touchEffective.addEventListener("touchmove",h.progressBarSeeking),m.touchEffective.addEventListener("touchend",h.progressBarSeeking),m.touchEffective.addEventListener("touchcancel",h.progressBarSeeking)):(document.addEventListener("mousemove",h.progressBarSeeking),document.addEventListener("mouseup",h.progressBarSeeking))},o=function(){v.moveX=("touchmove"==t.type?t.touches[0]:t).clientX,v.isTouchMove||(v.isTouchMove=!0,m.progressBall.querySelector(".progress-ball").style.boxShadow="0 0 20px 3px "+c.themeColor,n&&(new n.interface)._onAgentEventAction("touchmove-footerbar")),v.startX||(v.startX=v.moveX);var e=v.moveX-v.startX;h.progressControlHandle(e,m.touchEffective)},r=function(){"touchend"==t.type?(m.touchEffective.removeEventListener("touchmove",h.progressBarSeeking),m.touchEffective.removeEventListener("touchend",h.progressBarSeeking),m.touchEffective.removeEventListener("touchcancel",h.progressBarSeeking)):(document.removeEventListener("mousemove",h.progressBarSeeking),document.removeEventListener("mouseup",h.progressBarSeeking)),v.isTouchMove&&(m.progressBall.querySelector(".progress-ball").style.boxShadow="0 1px 10px #cccccc",n&&(new n.interface)._onAgentEventAction("touchend-footerbar")),m.videoObject.currentTime=v.currentTime,v.ball_move_status=!1,h.resetTouchVariable(),h.createTimerCloseControl()};switch(t.type){case"mousedown":e();break;case"mousemove":o();break;case"mouseup":r();break;case"touchstart":e();break;case"touchmove":o();break;case"touchend":r();break;case"touchcancel":m.touchEffective.removeEventListener("touchmove",h.progressBarSeeking),m.touchEffective.removeEventListener("touchend",h.progressBarSeeking),m.touchEffective.removeEventListener("touchcancel",h.progressBarSeeking),v.ball_move_status=!1,h.resetTouchVariable(),h.createTimerCloseControl(),n&&(new n.interface)._onAgentEventAction("touchend-footerbar");break;default:t.type}}},resetTouchVariable:function(){v.startX=null,v.startY=null,v.moveX=null,v.moveY=null,setTimeout(function(){v.isTouchMove=!1},50)},createTimerCloseControl:function(e){var t;"cancel"!=(e=e||{}).type?(t=function(){l._global_.mp_timeout_3=setTimeout(function(){h.toggleControlsDisplay({type:e.type||"timer"})},3500)},l._global_.mp_timeout_3&&clearTimeout(l._global_.mp_timeout_3),t()):l._global_.mp_timeout_3&&clearTimeout(l._global_.mp_timeout_3)},closeMpSidebar:function(){for(var e=!1,t=m.mPlayer.querySelectorAll(".mplayer-sidebar"),o=0;o<t.length;o++)t[o].classList.contains("open")&&(t[o].classList.remove("open"),e=!0,"object"==_typeof(l._global_.webpagePlugin)&&"removeEventListener"==l._global_.webpagePlugin.eventStatus&&(new r.interface)._addEvent());return e},toggleControlsDisplay:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();var t=h.closeMpSidebar();if(!t&&"DOMContentLoaded"!=e.type&&"resize"!=e.type&&"orientationchange"!=e.type){var r=["webkitTransform","transform","msTransform"],o=function(){m.mplayerHeader.classList.toggle("show",!0)},n=function(){m.mplayerHeader.classList.toggle("show",!1);for(var e=m.mplayerHeader.getBoundingClientRect().height,t=0;t<r.length;t++)m.mplayerHeader.style[r[t]]="translateY("+-e+"px)"},i=function(){m.mplayerFooter.classList.toggle("show",!0),m.miniProgress.style.opacity=0},t=function(){m.mplayerFooter.classList.toggle("show",!1);for(var e=m.mplayerFooter.getBoundingClientRect().height,t=m.progressContainer.classList.contains("upper-position")?Number.parseInt(m.progressContainer.getBoundingClientRect().height/2)+1:0,o=0;o<r.length;o++)m.mplayerFooter.style[r[o]]="translateY("+(e+t)+"px)";m.miniProgress.style.opacity=1};return"showControls"==e.type?(i(),o(),v.showScreenControls=!0,h.createTimerCloseControl(),void l.emit("controls-toggle",{show:!0})):"hideControls"==e.type?(t(),n(),v.showScreenControls=!1,h.createTimerCloseControl({type:"cancel"}),void l.emit("controls-toggle",{show:!1})):void(("timer"!=e.type&&"dblscreen"!=e.type||0!=v.showScreenControls)&&(v.showScreenControls?(t(),n(),v.showScreenControls=!1,l.emit("controls-toggle",{show:!1})):(i(),o(),v.showScreenControls=!0,h.createTimerCloseControl(),l.emit("controls-toggle",{show:!0}),window.plus&&v.isFullScreen&&plus.navigator.hideSystemNavigation())))}},onWaiting:function(){v.isPlay=!1,l._global_.mp_timeout_1||(l._global_.mp_timeout_1=setTimeout(function(){v.isPlay||h.showLoading(),l._global_.mp_timeout_1=null},500))},onError:function(e){console.error(e),v.isDestory&&1<=v.playError||setTimeout(function(){(0===(m.videoObject.readyState||0)||m.videoObject.duration<=1)&&(v.playError++,m.mplayerError.style.display="block",m.videoObject.style.opacity=0,h.showCover(),h.hideLoading(),h.toggleControlsDisplay({type:"hideControls"}),h.toggleEventListenerGlobal("remove"),h.toggleEventListenerCustom("remove"),m.mplayerError.addEventListener("click",function(e){e.stopPropagation(),h.reloadUrl()},{once:!0}),l.emit("error",e))},3e3)},reloadUrl:function(e){h.destory(),h.createTimerCloseControl({type:"cancel"}),e&&(y.src=e),v.isFullScreen&&setTimeout(function(){h.openFullScreen(),h.fullScreenChangeAction("Y")},50),h.initCreateMplayer(!0)},destory:function(){var e;m.mPlayer.querySelector("#mplayer-media-wrapper video")&&(v.isDestory=!0,h.toggleEventListenerGlobal("remove"),h.toggleEventListenerCustom("remove"),i&&i.media&&(i.detachMedia(),i=""),a&&(a.destroy(),a=""),e=m.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),m.mPlayer.querySelector("#mplayer-media-wrapper").style.height=e.height+"px",m.mPlayer.querySelector("#mplayer-media-wrapper").style.width=e.width+"px",m.mPlayer.querySelector("#mplayer-media-wrapper video").pause(),m.mPlayer.querySelector("#mplayer-media-wrapper video").removeAttribute("src"),m.mPlayer.querySelector("#mplayer-media-wrapper").innerHTML="",l.emit("destory"))},onProgress:function(){var e=m.videoObject.buffered;if(0<e.length&&0<v.duration){if(e.end(0)==v.duration)return m.miniBuffered.style.width="100%",m.progressBuffered.style.width="100%",void(m.progressBuffered.style.borderRadius="5px");for(var t=0;t<e.length;t++){e.start(t);var o=e.end(t);if(o>v.currentTime){o=o/v.duration*100;m.progressBuffered.style.width=o+"%",m.miniBuffered.style.width=o+"%";break}}}},showLoading:function(){"inline-block"!=m.mplayerLoading.style.display&&(m.mplayerLoading.style.display="inline-block")},hideLoading:function(){"none"!=m.mplayerLoading.style.display&&(m.mplayerLoading.style.display="none")},showCover:function(){m.mplayerCover.style.opacity<=0&&(m.mplayerCover.style.zIndex=888,m.mplayerCover.style.opacity=.2)},hideCover:function(){"0"!=m.mplayerCover.style.opacity&&(m.mplayerCover.style.opacity=0,m.mplayerCover.style.zIndex=-1)},showToast:function(e){var t,o=m.mPlayer.querySelector("#mplayer-media-wrapper");o.querySelector("#mplayer-toast")&&h.removeNode(o,"#mplayer-toast"),(t=document.createElement("div")).setAttribute("class","mplayer-toast toast-scaling"),t.setAttribute("id","mplayer-toast"),t.innerHTML=e,o.appendChild(t),l._global_.handleIconTimer_2&&window.clearTimeout(l._global_.handleIconTimer_2),l._global_.handleIconTimer_2=setTimeout(function(){h.removeNode(o,"#mplayer-toast")},1500)},toggleControlsStyle:function(e){for(var t,o=(y.custom||{}).footerControls||[],r=0;r<o.length;r++)!0!==o[r].oftenShow&&(t=o[r].slot,(t=m.mplayerFooter.querySelector("[slot="+t+"]"))&&("portrait"==e&&(t.style.display="none"),"landscape"==e&&(t.style.display="block")))},onDocVisibilitychange:function(){!1!==v.showScreenControls&&h.createTimerCloseControl({type:"visible"==document.visibilityState?"":"cancel"})},onScreenResize:function(e){(e=e||{type:""}).stopPropagation&&e.stopPropagation();function t(){h.toggleControlsDisplay(e),m.progressContainer.classList.remove("upper-position"),h.toggleControlsStyle("portrait"),setTimeout(function(){var e={direction:"portrait"};"window"==h.returnSys()&&(e.fullscreen=v.isFullScreen),l.emit("fullscreen-change",e)},10),window.plus&&setTimeout(function(){plus.navigator.showSystemNavigation()},200)}function o(){h.toggleControlsDisplay(e),m.progressContainer.classList.add("upper-position"),h.toggleControlsStyle("landscape"),setTimeout(function(){var e={direction:"landscape"};"window"==h.returnSys()&&(e.fullscreen=v.isFullScreen),l.emit("fullscreen-change",e)},10),window.plus&&v.isFullScreen&&setTimeout(function(){plus.navigator.hideSystemNavigation()},200)}h.createTimerCloseControl(),window.orientation||0==window.orientation?(0==window.orientation||180==window.orientation?t:o)():setTimeout(function(){(500<=m.mPlayer.getBoundingClientRect().width?o:t)()},0)},returnSys:function(){var e=new function(){var e=navigator.userAgent;navigator.appVersion;return{ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad")}};return e.iPhone||e.iPad||e.ios?"ios":e.android?"androd":"window"},toggleEventListenerCustom:function(e){var t=y.custom||{},o="add"==e?"addEventListener":"removeEventListener",r=t.headControls||[];if(0<r.length)for(var n=0;n<r.length;n++)!r[n].click instanceof Function||(l=r[n].slot,(a=m.headerMenu.querySelector("[slot="+l+"]"))instanceof Element&&a[o]("click",r[n].click));var i=t.footerControls||[];if(0<i.length)for(var l,a,n=0;n<i.length;n++)!i[n].click instanceof Function||(l=i[n].slot,(a=m.mplayerFooter.querySelector("[slot="+l+"]"))instanceof Element&&a[o]("click",i[n].click))},toggleEventListenerGlobal:function(e,t){var o,r="add"==e?"addEventListener":"removeEventListener";o="onorientationchange"in window?"orientationchange":"resize",window[r](o,h.onScreenResize),m.backButton[r]("click",h.onBack),m.fullSwitch[r]("click",h.fullToggle),m.playSwitch[r]("click",h.onPlayTap),m.mPlayer[r]("click",h.onContrainerTap),m.mPlayer[r]("dblclick",h.onContrainerTap),m.touchEffective instanceof Element&&m.touchEffective[r]("touchstart",h.progressBarSeeking),m.touchEffective instanceof Element&&m.touchEffective[r]("mousedown",h.progressBarSeeking),m.videoObject[r]("webkitbeginfullscreen",h.runtimeCompatibleHandle),m.videoObject[r]("webkitendfullscreen",h.runtimeCompatibleHandle),document[r]("resume",h.plusRuntimeHandle),document[r]("pause",h.plusRuntimeHandle),document[r]("visibilitychange",h.onDocVisibilitychange),"playerReady"==t&&function(){m.mplayerCover.addEventListener("touchstart",function(e){e.stopPropagation()}),m.mplayerCover.addEventListener("touchmove",function(e){e.stopPropagation()}),m.mplayerHeader.addEventListener("touchmove",function(e){e.stopPropagation()}),m.mplayerHeader.addEventListener("click",function(e){e.stopPropagation()}),m.mplayerHeader.addEventListener("dblclick",function(e){e.stopPropagation()}),m.mplayerFooter.addEventListener("touchmove",function(e){e.stopPropagation()}),m.mplayerFooter.addEventListener("click",function(e){e.stopPropagation()}),m.mplayerFooter.addEventListener("dblclick",function(e){e.stopPropagation()}),m.mplayerError.addEventListener("touchstart",function(e){e.stopPropagation()}),m.mplayerError.addEventListener("touchmove",function(e){e.stopPropagation()}),m.videoObject.addEventListener("canplaythrough",h.onCanplaythrough),m.videoObject.addEventListener("durationchange",h.onDurationChange),y.live||m.videoObject.addEventListener("timeupdate",h.onTimeupdate),m.videoObject.addEventListener("play",h.onPlay),m.videoObject.addEventListener("playing",h.onPlaying),m.videoObject.addEventListener("pause",h.onPause),m.videoObject.addEventListener("waiting",h.onWaiting),m.videoObject.addEventListener("error",h.onError),y.live||m.videoObject.addEventListener("progress",h.onProgress);for(var e=m.mPlayer.querySelectorAll(".mplayer-sidebar"),t=0;t<e.length;t++)e[t].addEventListener("touchstart",function(e){e.stopPropagation()}),e[t].addEventListener("touchmove",function(e){e.stopPropagation()}),e[t].addEventListener("touchend",function(e){e.stopPropagation()}),e[t].addEventListener("click",function(e){e.stopPropagation()}),e[t].addEventListener("dblclick",function(e){e.stopPropagation()})}()}},this.showRightSidebar=function(e){e=m.mPlayer.querySelector("#mplayer-media-wrapper [slot="+e+"]");e&&e.classList.contains("mplayer-sidebar")&&(h.toggleControlsDisplay({type:"sidebarRight"}),h.createTimerCloseControl({type:"cancel"}),e.classList.add("open"),r&&(new r.interface)._removeEvent())},this.toggleControls=function(e){!0===e?0==v.showScreenControls?h.toggleControlsDisplay({type:"showControls"}):h.createTimerCloseControl():!1===e?1==v.showScreenControls&&h.toggleControlsDisplay({type:"hideControls"}):h.toggleControlsDisplay()},this.showToast=function(e){h.showToast(e)},this.showLoading=function(){h.showLoading()},this.hideLoading=function(){h.hideLoading()},this.video=function(){return m.videoObject},this.reloadUrl=function(e){h.reloadUrl(e)},this.destory=function(){h.destory()},this.openFullScreen=function(){h.openFullScreen()},this.closeFullScreen=function(){h.closeFullScreen()},this.sendError=function(e){h.onError(e)},this.getControls=function(){return setTimeout(function(){h.overloadingEl()},10),m.mPlayer.querySelectorAll("[control]")},"interactive"==document.readyState||"complete"==document.readyState?h.initCreateMplayer():document.addEventListener("readystatechange",function(){"interactive"==document.readyState&&h.initCreateMplayer()}))}return e.prototype.on=function(e,t){this._event_[e]||(this._event_[e]=[]),this._event_[e].push(t)},e.prototype.off=function(e,t){this._event_[e]&&(t?0<=(t=this._event_[e].indexOf(t))&&this._event_[e].splice(t,1):this._event_[e]=void 0)},e.prototype.emit=function(e,t){if(this._event_[e])for(var o=0;o<this._event_[e].length;o++)(0,this._event_[e][o])(t)},e.prototype.once=function(t,o){function r(e){o(e),setTimeout(function(){n.off(t,r)},200)}var n=this;this.on(t,r)},e});